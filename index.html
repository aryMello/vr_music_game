<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>VR Rhythm Runner</title>
  <link rel="stylesheet" href="./style/styles.css">
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
</head>
<body>
  <!-- UI Overlay (Always visible even in VR) -->
  <div id="ui-overlay">
    <!-- Tela de SeleÃ§Ã£o de Modo -->
    <div id="mode-select">
      <h1>ğŸµ VR Rhythm Runner ğŸµ</h1>
      <p class="subtitle">Experimente a mÃºsica em uma nova dimensÃ£o</p>
      
      <div class="mode-container">
        <button class="mode-btn" id="vr-mode-btn">
          <span class="mode-icon">ğŸ¥½</span>
          <div class="mode-info">
            <div class="mode-title">Modo Headset VR</div>
            <div class="mode-description">Use o movimento da cabeÃ§a para desviar dos obstÃ¡culos</div>
            <div class="mode-controls">Apenas controles de olhar com mouse</div>
          </div>
        </button>
        
        <!-- DESKTOP MODE DISABLED - Only VR Mode is active -->
        <!-- 
        <button class="mode-btn" id="desktop-mode-btn">
          <span class="mode-icon">ğŸ–¥ï¸</span>
          <div class="mode-info">
            <div class="mode-title">Modo Desktop</div>
            <div class="mode-description">Use as setas do teclado para desviar dos obstÃ¡culos</div>
            <div class="mode-controls">â† â†’ â†‘ â†“ Setas do Teclado</div>
          </div>
        </button>
        -->
      </div>
    </div>

    <!-- Tela de SeleÃ§Ã£o de MÃºsica -->
    <div id="song-select" class="hidden">
      <h1>ğŸµ ESCOLHA SUA MÃšSICA ğŸµ</h1>
      <p class="subtitle" id="mode-indicator">Modo: VR</p>
      <button class="song-btn" data-song="easy">
        <span class="icon">ğŸ¼</span>
        <div class="song-info">
          <div class="song-title">Vibes Tranquilas</div>
          <div class="song-difficulty">FÃ¡cil â€¢ Ritmo Relaxado</div>
        </div>
      </button>
      <button class="song-btn" data-song="medium">
        <span class="icon">ğŸ¸</span>
        <div class="song-info">
          <div class="song-title">Energia Rock</div>
          <div class="song-difficulty">MÃ©dio â€¢ Batidas DinÃ¢micas</div>
        </div>
      </button>
      <button class="song-btn" data-song="hard">
        <span class="icon">âš¡</span>
        <div class="song-info">
          <div class="song-title">Tempestade EletrÃ´nica</div>
          <div class="song-difficulty">DifÃ­cil â€¢ Ritmo Intenso</div>
        </div>
      </button>
    </div>

    <div id="countdown" class="hidden">
      <div id="countdown-number">3</div>
      <div id="countdown-text">Prepare-se!</div>
    </div>

    <div id="loading" class="hidden">
      <div class="loading-spinner"></div>
      <div class="loading-text">Analisando MÃºsica...</div>
    </div>

    <div id="game-over" class="hidden">
      <h1>ğŸ’¥ FIM DE JOGO ğŸ’¥</h1>
      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-label">Tempo de SobrevivÃªncia</div>
          <div class="stat-value" id="time-stat">0.00s</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Progresso da MÃºsica</div>
          <div class="stat-value" id="progress-stat">0%</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">PontuaÃ§Ã£o</div>
          <div class="stat-value" id="score-stat">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">ObstÃ¡culos Desviados</div>
          <div class="stat-value" id="dodged-stat">0</div>
        </div>
      </div>
      <button id="restart-btn">ğŸ”„ Jogar Novamente</button>
    </div>

    <div id="victory-screen" class="hidden">
      <h1>ğŸ‰ VITÃ“RIA! ğŸ‰</h1>
      <p class="subtitle">VocÃª completou a mÃºsica inteira!</p>
      <div class="stats-container">
        <div class="stat-card">
          <div class="stat-label">Tempo de ConclusÃ£o</div>
          <div class="stat-value" id="victory-time-stat">0.00s</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">PontuaÃ§Ã£o Final</div>
          <div class="stat-value" id="victory-score-stat">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">ObstÃ¡culos Desviados</div>
          <div class="stat-value" id="victory-dodged-stat">0</div>
        </div>
      </div>
      <button id="victory-restart-btn">ğŸ”„ Jogar Novamente</button>
    </div>
  </div>

  <!-- HUD Overlay -->
  <div id="hud" class="hidden">
    <div class="hud-item" id="hud-score">PontuaÃ§Ã£o: 0</div>
    <div class="hud-item" id="hud-time">Tempo: 0.0s</div>
    <div class="hud-item" id="hud-combo">Combo: x1</div>
  </div>

  <!-- VR Scene -->
  <a-scene loading-screen="enabled: false" vr-mode-ui="enabled: true">
    <!-- Environment -->
    <a-sky id="sky" color="#000033"></a-sky>
    
    <!-- Camera Rig - VR Mode with automatic forward movement -->
    <a-entity id="camera-rig" position="0 1.6 0">
      <a-camera 
        id="player" 
        look-controls="enabled: true; touchEnabled: true; magicWindowTrackingEnabled: true; reverseMouseDrag: false"
        wasd-controls="enabled: false">
        <!-- Crosshair -->
        <a-entity 
          geometry="primitive: ring; radiusInner: 0.015; radiusOuter: 0.025"
          material="color: #00ffff; shader: flat; opacity: 0.7"
          position="0 0 -1">
        </a-entity>
      </a-camera>
    </a-entity>

    <!-- Lighting -->
    <a-entity light="type: ambient; intensity: 0.4; color: #6688ff"></a-entity>
    <a-entity light="type: directional; intensity: 0.5; color: #ffffff" position="2 4 -3"></a-entity>
    <a-entity light="type: point; intensity: 0.8; color: #ff00ff; distance: 20" position="0 3 -10" 
              animation="property: position; to: 0 3 -30; dur: 3000; dir: alternate; loop: true"></a-entity>

    <!-- Particle System Container -->
    <a-entity id="particles"></a-entity>
    
    <!-- Obstacles Container -->
    <a-entity id="obstacles"></a-entity>

    <!-- Tunnel Container -->
    <a-entity id="tunnel"></a-entity>
  </a-scene>

  <!-- Load modular JavaScript files -->
  <script type="module" src="./js/main.js"></script>
</body>
</html>